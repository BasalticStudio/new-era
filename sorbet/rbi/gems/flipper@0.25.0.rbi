# typed: true

# DO NOT EDIT MANUALLY
# This is an autogenerated file for types exported from the `flipper` gem.
# Please instead update this file by running `bin/tapioca gem flipper`.

# Simple class for turning a flipper_id into an actor that can be based
# to Flipper::Feature#enabled?.
module Flipper
  extend ::Flipper
  extend ::Forwardable

  def [](*args, &block); end
  def actor(*args, &block); end
  def actors(*args, &block); end
  def adapter(*args, &block); end
  def add(*args, &block); end
  def bool(*args, &block); end
  def boolean(*args, &block); end

  # Public: Returns Flipper::Configuration instance.
  def configuration; end

  # Public: Sets Flipper::Configuration instance.
  def configuration=(configuration); end

  # Public: Configure flipper.
  #
  #   Flipper.configure do |config|
  #     config.adapter { ... }
  #   end
  #
  # Yields Flipper::Configuration instance.
  #
  # @yield [configuration]
  def configure; end

  def disable(*args, &block); end
  def disable_actor(*args, &block); end
  def disable_group(*args, &block); end
  def disable_percentage_of_actors(*args, &block); end
  def disable_percentage_of_time(*args, &block); end
  def enable(*args, &block); end
  def enable_actor(*args, &block); end
  def enable_group(*args, &block); end
  def enable_percentage_of_actors(*args, &block); end
  def enable_percentage_of_time(*args, &block); end
  def enabled?(*args, &block); end
  def exist?(*args, &block); end
  def feature(*args, &block); end
  def features(*args, &block); end

  # Public: Fetches a group by name.
  #
  # name - The Symbol name of the group.
  #
  # Examples
  #
  #   Flipper.group(:admins)
  #
  # Returns Flipper::Group.
  def group(name); end

  # Public: Check if a group exists
  #
  # Returns boolean
  #
  # @return [Boolean]
  def group_exists?(name); end

  # Public: Returns a Set of symbols where each symbol is a registered
  # group name. If you just want the names, this is more efficient than doing
  # `Flipper.groups.map(&:name)`.
  def group_names; end

  # Public: Returns a Set of registered Types::Group instances.
  def groups; end

  # Internal: Registry of all groups_registry.
  def groups_registry; end

  # Internal: Change the groups_registry registry.
  def groups_registry=(registry); end

  def import(*args, &block); end

  # Public: Default per thread flipper instance if configured. You should not
  # need to use this directly as most of the Flipper::DSL methods are delegated
  # from Flipper module itself. Instead of doing Flipper.instance.enabled?(:search),
  # you can use Flipper.enabled?(:search) for the same result.
  #
  # Returns Flipper::DSL instance.
  def instance; end

  # Public: Set the flipper instance. It is most common to use the
  # Configuration#default to set this instance, but for things like the test
  # environment, this writer is actually useful.
  def instance=(flipper); end

  def memoize=(*args, &block); end
  def memoizing?(*args, &block); end

  # Public: Start here. Given an adapter returns a handy DSL to all the flipper
  # goodness. To see supported options, check out dsl.rb.
  def new(adapter, options = T.unsafe(nil)); end

  def percentage_of_actors(*args, &block); end
  def percentage_of_time(*args, &block); end
  def preload(*args, &block); end
  def preload_all(*args, &block); end

  # Public: Use this to register a group by name.
  #
  # name - The Symbol name of the group.
  # block - The block that should be used to determine if the group matches a
  #         given thing.
  #
  # Examples
  #
  #   Flipper.register(:admins) { |thing|
  #     thing.respond_to?(:admin?) && thing.admin?
  #   }
  #
  # Returns a Flipper::Group.
  # Raises Flipper::DuplicateGroup if the group is already registered.
  def register(name, &block); end

  def remove(*args, &block); end
  def sync(*args, &block); end
  def sync_secret(*args, &block); end
  def time(*args, &block); end

  # Public: Clears the group registry.
  #
  # Returns nothing.
  def unregister_groups; end
end

class Flipper::Actor
  # @return [Actor] a new instance of Actor
  def initialize(flipper_id); end

  # @return [Boolean]
  def ==(other); end

  # @return [Boolean]
  def eql?(other); end

  # Returns the value of attribute flipper_id.
  def flipper_id; end

  def hash; end
end

# Adding a module include so we have some hooks for stuff down the road
module Flipper::Adapter
  mixes_in_class_methods ::Flipper::Adapter::ClassMethods

  # Public: Default config for a feature's gate values.
  def default_config; end

  # Public: Get all features and gate values in one call. Defaults to one call
  # to features and another to get_multi. Feel free to override per adapter to
  # make this more efficient.
  def get_all; end

  # Public: Get multiple features in one call. Defaults to one get per
  # feature. Feel free to override per adapter to make this more efficient and
  # reduce network calls.
  def get_multi(features); end

  # Public: Ensure that adapter is in sync with source adapter provided.
  #
  # Returns result of Synchronizer#call.
  def import(source_adapter); end

  class << self
    # @private
    def included(base); end
  end
end

module Flipper::Adapter::ClassMethods
  # Public: Default config for a feature's gate values.
  def default_config; end
end

module Flipper::Adapters; end

# Internal: Adapter that wraps another adapter and instruments all adapter
# operations.
class Flipper::Adapters::Instrumented < ::SimpleDelegator
  include ::Flipper::Adapter
  extend ::Flipper::Adapter::ClassMethods

  # Internal: Initializes a new adapter instance.
  #
  # adapter - Vanilla adapter instance to wrap.
  #
  # options - The Hash of options.
  #           :instrumenter - What to use to instrument all the things.
  #
  # @return [Instrumented] a new instance of Instrumented
  def initialize(adapter, options = T.unsafe(nil)); end

  # Public
  def add(feature); end

  # Public
  def clear(feature); end

  # Public
  def disable(feature, gate, thing); end

  # Public
  def enable(feature, gate, thing); end

  # Public
  def features; end

  # Public
  def get(feature); end

  def get_all; end
  def get_multi(features); end

  # Private: What is used to instrument all the things.
  def instrumenter; end

  # Public: The name of the adapter.
  def name; end

  # Public
  def remove(feature); end
end

# Private: The name of instrumentation events.
Flipper::Adapters::Instrumented::InstrumentationName = T.let(T.unsafe(nil), String)

# Internal: Adapter that wraps another adapter with the ability to memoize
# adapter calls in memory. Used by flipper dsl and the memoizer middleware
# to make it possible to memoize adapter calls for the duration of a request.
class Flipper::Adapters::Memoizable < ::SimpleDelegator
  include ::Flipper::Adapter
  extend ::Flipper::Adapter::ClassMethods

  # Public
  #
  # @return [Memoizable] a new instance of Memoizable
  def initialize(adapter, cache = T.unsafe(nil)); end

  # Internal: The adapter this adapter is wrapping.
  def adapter; end

  # Public
  def add(feature); end

  # Internal
  def cache; end

  # Public
  def clear(feature); end

  # Public
  def disable(feature, gate, thing); end

  # Public
  def enable(feature, gate, thing); end

  # Public
  def features; end

  # Public
  def get(feature); end

  def get_all; end

  # Public
  def get_multi(features); end

  # Internal: Turns local caching on/off.
  #
  # value - The Boolean that decides if local caching is on.
  def memoize=(value); end

  # Internal: Returns true for using local cache, false for not.
  #
  # @return [Boolean]
  def memoizing?; end

  # Public: The name of the adapter.
  def name; end

  # Public
  def remove(feature); end

  private

  def expire_feature(feature); end
  def expire_features_set; end
  def key_for(key); end

  class << self
    # Private
    def key_for(key); end
  end
end

Flipper::Adapters::Memoizable::FeaturesKey = T.let(T.unsafe(nil), Symbol)
Flipper::Adapters::Memoizable::GetAllKey = T.let(T.unsafe(nil), Symbol)

# Public: Adapter for storing everything in memory.
# Useful for tests/specs.
class Flipper::Adapters::Memory
  include ::Flipper::Adapter
  extend ::Flipper::Adapter::ClassMethods

  # Public
  #
  # @return [Memory] a new instance of Memory
  def initialize(source = T.unsafe(nil)); end

  # Public: Adds a feature to the set of known features.
  def add(feature); end

  # Public: Clears all the gate values for a feature.
  def clear(feature); end

  # Public
  def disable(feature, gate, thing); end

  # Public
  def enable(feature, gate, thing); end

  # Public: The set of known features.
  def features; end

  # Public
  def get(feature); end

  def get_all; end
  def get_multi(features); end

  # Public
  def inspect; end

  # Public: The name of the adapter.
  def name; end

  # Public: Removes a feature from the set of known features and clears
  # all the values for the feature.
  def remove(feature); end
end

Flipper::Adapters::Memory::FeaturesKey = T.let(T.unsafe(nil), Symbol)

# TODO: Syncing should happen in a background thread on a regular interval
# rather than in the main thread only when reads happen.
class Flipper::Adapters::Sync; end

# Internal: Given a feature, local gate values and remote gate values,
# makes the local equal to the remote.
class Flipper::Adapters::Sync::FeatureSynchronizer
  extend ::Forwardable

  # @return [FeatureSynchronizer] a new instance of FeatureSynchronizer
  def initialize(feature, local_gate_values, remote_gate_values); end

  def call; end
  def local_actors(*args, &block); end
  def local_boolean(*args, &block); end
  def local_groups(*args, &block); end
  def local_percentage_of_actors(*args, &block); end
  def local_percentage_of_time(*args, &block); end
  def remote_actors(*args, &block); end
  def remote_boolean(*args, &block); end
  def remote_groups(*args, &block); end
  def remote_percentage_of_actors(*args, &block); end
  def remote_percentage_of_time(*args, &block); end

  private

  def default_config; end
  def default_gate_values; end

  # @return [Boolean]
  def default_gate_values?(gate_values); end

  # @return [Boolean]
  def local_boolean_enabled?; end

  # @return [Boolean]
  def local_disabled?; end

  # @return [Boolean]
  def remote_boolean_enabled?; end

  # @return [Boolean]
  def remote_disabled?; end

  def sync_actors; end
  def sync_groups; end
  def sync_percentage_of_actors; end
  def sync_percentage_of_time; end
end

# Public: Given a local and remote adapter, it can update the local to
# match the remote doing only the necessary enable/disable operations.
class Flipper::Adapters::Sync::Synchronizer
  # Public: Initializes a new synchronizer.
  #
  # local - The Flipper adapter to get in sync with the remote.
  # remote - The Flipper adapter that is source of truth that the local
  #          adapter should be brought in line with.
  # options - The Hash of options.
  #           :instrumenter - The instrumenter used to instrument.
  #           :raise - Should errors be raised (default: true).
  #
  # @return [Synchronizer] a new instance of Synchronizer
  def initialize(local, remote, options = T.unsafe(nil)); end

  # Public: Forces a sync.
  def call; end

  private

  def sync; end
end

class Flipper::Configuration
  # @return [Configuration] a new instance of Configuration
  def initialize(options = T.unsafe(nil)); end

  # The default adapter to use.
  #
  # Pass a block to assign the adapter, and invoke without a block to
  # return the configured adapter instance.
  #
  #   Flipper.configure do |config|
  #     config.adapter # => instance of default Memory adapter
  #
  #     # Configure it to use the ActiveRecord adapter
  #     config.adapter do
  #       require "flipper/adapters/active_record"
  #       Flipper::Adapters::ActiveRecord.new
  #     end
  #
  #     config.adapter # => instance of ActiveRecord adapter
  #  end
  def adapter(&block); end

  # Controls the default instance for flipper. When used with a block it
  # assigns a new default block to use to generate an instance. When used
  # without a block, it performs a block invocation and returns the result.
  #
  #   configuration = Flipper::Configuration.new
  #   configuration.default # => Flipper::DSL instance using Memory adapter
  #
  #   # sets the default block to generate a new instance using ActiveRecord adapter
  #   configuration.default do
  #     require "flipper/adapters/active_record"
  #     Flipper.new(Flipper::Adapters::ActiveRecord.new)
  #   end
  #
  #   configuration.default # => Flipper::DSL instance using ActiveRecord adapter
  #
  # Returns result of default block invocation if called without block. If
  # called with block, assigns the default block.
  def default(&block); end
end

class Flipper::DSL
  extend ::Forwardable

  # Public: Returns a new instance of the DSL.
  #
  # adapter - The adapter that this DSL instance should use.
  # options - The Hash of options.
  #           :instrumenter - What should be used to instrument all the things.
  #           :memoize - Should adapter be wrapped by memoize adapter or not.
  #
  # @return [DSL] a new instance of DSL
  def initialize(adapter, options = T.unsafe(nil)); end

  # Public: Access a feature instance by name.
  #
  # name - The String or Symbol name of the feature.
  #
  # Returns an instance of Flipper::Feature.
  # Public: Shortcut access to a feature instance by name.
  #
  # name - The String or Symbol name of the feature.
  #
  # Returns an instance of Flipper::Feature.
  def [](name); end

  # Public: Wraps an object as a flipper actor.
  #
  # thing - The object that you would like to wrap.
  #
  # Returns an instance of Flipper::Types::Actor.
  # Raises ArgumentError if thing does not respond to `flipper_id`.
  def actor(thing); end

  # Public: Shortcut for getting a percentage of actors instance.
  #
  # number - The percentage of actors that should be enabled.
  #
  # Returns Flipper::Types::PercentageOfActors.
  def actors(number); end

  # Private
  def adapter; end

  # Public: Add a feature.
  #
  # name - The String or Symbol name of the feature.
  #
  # Returns result of add.
  def add(name); end

  # Public: Shortcut for getting a boolean type instance.
  #
  # value - The true or false value for the boolean.
  #
  # Returns a Flipper::Types::Boolean instance.
  # Public: Even shorter shortcut for getting a boolean type instance.
  #
  # value - The true or false value for the boolean.
  #
  # Returns a Flipper::Types::Boolean instance.
  def bool(value = T.unsafe(nil)); end

  # Public: Shortcut for getting a boolean type instance.
  #
  # value - The true or false value for the boolean.
  #
  # Returns a Flipper::Types::Boolean instance.
  def boolean(value = T.unsafe(nil)); end

  # Public: Disable a feature.
  #
  # name - The String or Symbol name of the feature.
  # args - The args passed through to the feature instance enable call.
  #
  # Returns the result of the feature instance disable call.
  def disable(name, *args); end

  # Public: Disable a feature for an actor.
  #
  # name - The String or Symbol name of the feature.
  # actor - a Flipper::Types::Actor instance or an object that responds
  #         to flipper_id.
  #
  # Returns result of disable.
  def disable_actor(name, actor); end

  # Public: Disable a feature for a group.
  #
  # name - The String or Symbol name of the feature.
  # group - a Flipper::Types::Group instance or a String or Symbol name of a
  #         registered group.
  #
  # Returns result of disable.
  def disable_group(name, group); end

  # Public: Disable a feature for a percentage of actors.
  #
  # name - The String or Symbol name of the feature.
  # percentage - a Flipper::Types::PercentageOfActors instance or an object
  #              that responds to to_i.
  #
  # Returns result of disable.
  def disable_percentage_of_actors(name); end

  # Public: Disable a feature a percentage of time.
  #
  # name - The String or Symbol name of the feature.
  # percentage - a Flipper::Types::PercentageOfTime instance or an object
  #              that responds to to_i.
  #
  # Returns result of disable.
  def disable_percentage_of_time(name); end

  # Public: Enable a feature.
  #
  # name - The String or Symbol name of the feature.
  # args - The args passed through to the feature instance enable call.
  #
  # Returns the result of the feature instance enable call.
  def enable(name, *args); end

  # Public: Enable a feature for an actor.
  #
  # name - The String or Symbol name of the feature.
  # actor - a Flipper::Types::Actor instance or an object that responds
  #         to flipper_id.
  #
  # Returns result of Feature#enable.
  def enable_actor(name, actor); end

  # Public: Enable a feature for a group.
  #
  # name - The String or Symbol name of the feature.
  # group - a Flipper::Types::Group instance or a String or Symbol name of a
  #         registered group.
  #
  # Returns result of Feature#enable.
  def enable_group(name, group); end

  # Public: Enable a feature for a percentage of actors.
  #
  # name - The String or Symbol name of the feature.
  # percentage - a Flipper::Types::PercentageOfActors instance or an object
  #              that responds to to_i.
  #
  # Returns result of Feature#enable.
  def enable_percentage_of_actors(name, percentage); end

  # Public: Enable a feature a percentage of time.
  #
  # name - The String or Symbol name of the feature.
  # percentage - a Flipper::Types::PercentageOfTime instance or an object
  #              that responds to to_i.
  #
  # Returns result of Feature#enable.
  def enable_percentage_of_time(name, percentage); end

  # Public: Check if a feature is enabled.
  #
  # name - The String or Symbol name of the feature.
  # args - The args passed through to the enabled check.
  #
  # Returns true if feature is enabled, false if not.
  #
  # @return [Boolean]
  def enabled?(name, *args); end

  # Public: Has a feature been added in the adapter.
  #
  # name - The String or Symbol name of the feature.
  #
  # Returns true if added else false.
  #
  # @return [Boolean]
  def exist?(name); end

  # Public: Access a feature instance by name.
  #
  # name - The String or Symbol name of the feature.
  #
  # Returns an instance of Flipper::Feature.
  def feature(name); end

  # Public: Returns a Set of the known features for this adapter.
  #
  # Returns Set of Flipper::Feature instances.
  def features; end

  # Public: Access a flipper group by name.
  #
  # name - The String or Symbol name of the feature.
  #
  # Returns an instance of Flipper::Group.
  def group(name); end

  def import(flipper); end

  # Private: What is being used to instrument all the things.
  def instrumenter; end

  def memoize=(*args, &block); end
  def memoizing?(*args, &block); end

  # Public: Shortcut for getting a percentage of actors instance.
  #
  # number - The percentage of actors that should be enabled.
  #
  # Returns Flipper::Types::PercentageOfActors.
  def percentage_of_actors(number); end

  # Public: Shortcut for getting a percentage of time instance.
  #
  # number - The percentage of time that should be enabled.
  #
  # Returns Flipper::Types::PercentageOfTime.
  def percentage_of_time(number); end

  # Public: Preload the features with the given names.
  #
  # names - An Array of String or Symbol names of the features.
  #
  # Returns an Array of Flipper::Feature.
  def preload(names); end

  # Public: Preload all the adapters features.
  #
  # Returns an Array of Flipper::Feature.
  def preload_all; end

  # Public: Remove a feature.
  #
  # name - The String or Symbol name of the feature.
  #
  # Returns result of remove.
  def remove(name); end

  # Cloud DSL method that does nothing for open source version.
  def sync; end

  # Cloud DSL method that does nothing for open source version.
  def sync_secret; end

  # Public: Shortcut for getting a percentage of time instance.
  #
  # number - The percentage of time that should be enabled.
  #
  # Returns Flipper::Types::PercentageOfTime.
  def time(number); end
end

# Raised when attempting to declare a group name that has already been used.
class Flipper::DuplicateGroup < ::Flipper::Error; end

# Top level error that all other errors inherit from.
class Flipper::Error < ::StandardError; end

class Flipper::Feature
  # Internal: Initializes a new feature instance.
  #
  # name - The Symbol or String name of the feature.
  # adapter - The adapter that will be used to store details about this feature.
  #
  # options - The Hash of options.
  #           :instrumenter - What to use to instrument all the things.
  #
  # @return [Feature] a new instance of Feature
  def initialize(name, adapter, options = T.unsafe(nil)); end

  # Public: Get the adapter value for the actors gate.
  #
  # Returns Set of String flipper_id's.
  def actors_value; end

  # Private: The adapter this feature should use.
  def adapter; end

  # Public: Adds this feature.
  #
  # Returns the result of Adapter#add.
  def add; end

  # Public: Get the adapter value for the boolean gate.
  #
  # Returns true or false.
  def boolean_value; end

  # Public: Clears all gate values for this feature.
  #
  # Returns the result of Adapter#clear.
  def clear; end

  # Public: Is the feature conditionally enabled for a given actor, group,
  # percentage of actors or percentage of the time.
  #
  # @return [Boolean]
  def conditional?; end

  # Public: Disable this feature for something.
  #
  # Returns the result of Adapter#disable.
  def disable(thing = T.unsafe(nil)); end

  # Public: Disables a feature for an actor.
  #
  # actor - a Flipper::Types::Actor instance or an object that responds
  #         to flipper_id.
  #
  # Returns result of disable.
  def disable_actor(actor); end

  # Public: Disables a feature for a group.
  #
  # group - a Flipper::Types::Group instance or a String or Symbol name of a
  #         registered group.
  #
  # Returns result of disable.
  def disable_group(group); end

  # Public: Disables a feature for a percentage of actors.
  #
  # percentage - a Flipper::Types::PercentageOfTime instance or an object that
  #              responds to to_i.
  #
  # Returns result of disable.
  def disable_percentage_of_actors; end

  # Public: Disables a feature a percentage of time.
  #
  # percentage - a Flipper::Types::PercentageOfTime instance or an object that
  #              responds to to_i.
  #
  # Returns result of disable.
  def disable_percentage_of_time; end

  # Public: Get the names of the disabled gates.
  #
  # Returns an Array of gate names.
  def disabled_gate_names; end

  # Public: Get the gates that have not been enabled for the feature.
  #
  # Returns an Array of Flipper::Gate instances.
  def disabled_gates; end

  # Public: Get groups not enabled for this feature.
  #
  # Returns Set of Flipper::Types::Group instances.
  def disabled_groups; end

  # Public: Enable this feature for something.
  #
  # Returns the result of Adapter#enable.
  def enable(thing = T.unsafe(nil)); end

  # Public: Enables a feature for an actor.
  #
  # actor - a Flipper::Types::Actor instance or an object that responds
  #         to flipper_id.
  #
  # Returns result of enable.
  def enable_actor(actor); end

  # Public: Enables a feature for a group.
  #
  # group - a Flipper::Types::Group instance or a String or Symbol name of a
  #         registered group.
  #
  # Returns result of enable.
  def enable_group(group); end

  # Public: Enables a feature for a percentage of actors.
  #
  # percentage - a Flipper::Types::PercentageOfTime instance or an object that
  #              responds to to_i.
  #
  # Returns result of enable.
  def enable_percentage_of_actors(percentage); end

  # Public: Enables a feature a percentage of time.
  #
  # percentage - a Flipper::Types::PercentageOfTime instance or an object that
  #              responds to to_i.
  #
  # Returns result of enable.
  def enable_percentage_of_time(percentage); end

  # Public: Check if a feature is enabled for a thing.
  #
  # Returns true if enabled, false if not.
  #
  # @return [Boolean]
  def enabled?(thing = T.unsafe(nil)); end

  # Public: Get the names of the enabled gates.
  #
  # Returns an Array of gate names.
  def enabled_gate_names; end

  # Public: Get the gates that have been enabled for the feature.
  #
  # Returns an Array of Flipper::Gate instances.
  def enabled_gates; end

  # Public: Get groups enabled for this feature.
  #
  # Returns Set of Flipper::Types::Group instances.
  def enabled_groups; end

  # Public: Does this feature exist in the adapter.
  #
  # Returns true if exists in adapter else false.
  #
  # @return [Boolean]
  def exist?; end

  # Public: Find a gate by name.
  #
  # Returns a Flipper::Gate if found, nil if not.
  def gate(name); end

  # Public: Find the gate that protects a thing.
  #
  # thing - The object for which you would like to find a gate
  #
  # Returns a Flipper::Gate.
  # Raises Flipper::GateNotFound if no gate found for thing
  def gate_for(thing); end

  # Public: Returns the raw gate values stored by the adapter.
  def gate_values; end

  # Public: Get all the gates used to determine enabled/disabled for the feature.
  #
  # Returns an array of gates
  def gates; end

  # Public: Get groups enabled for this feature.
  #
  # Returns Set of Flipper::Types::Group instances.
  def groups; end

  # Public: Get the adapter value for the groups gate.
  #
  # Returns Set of String group names.
  def groups_value; end

  # Public: Pretty string version for debugging.
  def inspect; end

  # Private: What is being used to instrument all the things.
  def instrumenter; end

  # Public: Name converted to value safe for adapter.
  def key; end

  # Public: The name of the feature.
  def name; end

  # Public: Is the feature fully disabled.
  #
  # @return [Boolean]
  def off?; end

  # Public: Is the feature fully enabled.
  #
  # @return [Boolean]
  def on?; end

  # Public: Get the adapter value for the percentage of actors gate.
  #
  # Returns Integer greater than or equal to 0 and less than or equal to 100.
  def percentage_of_actors_value; end

  # Public: Get the adapter value for the percentage of time gate.
  #
  # Returns Integer greater than or equal to 0 and less than or equal to 100.
  def percentage_of_time_value; end

  # Public: Removes this feature.
  #
  # Returns the result of Adapter#remove.
  def remove; end

  # Public: Returns state for feature (:on, :off, or :conditional).
  def state; end

  # Public: Identifier to be used in the url (a rails-ism).
  def to_param; end

  # Public: Returns the string representation of the feature.
  def to_s; end

  private

  # Private: Instrument a feature operation.
  def instrument(operation); end
end

# Private: The name of feature instrumentation events.
Flipper::Feature::InstrumentationName = T.let(T.unsafe(nil), String)

class Flipper::FeatureCheckContext
  # @return [FeatureCheckContext] a new instance of FeatureCheckContext
  def initialize(options = T.unsafe(nil)); end

  # Public: Convenience method for actors value value like Feature has.
  def actors_value; end

  # Public: Convenience method for boolean value value like Feature has.
  def boolean_value; end

  # Public: The name of the feature.
  def feature_name; end

  # Public: Convenience method for groups value like Feature has.
  def groups_value; end

  # Public: Convenience method for percentage of actors value like Feature has.
  def percentage_of_actors_value; end

  # Public: Convenience method for percentage of time value like Feature has.
  def percentage_of_time_value; end

  # Public: The thing we want to know if a feature is enabled for.
  def thing; end

  # Public: The GateValues instance that keeps track of the values for the
  # gates for the feature.
  def values; end
end

class Flipper::Gate
  # Public
  #
  # @return [Gate] a new instance of Gate
  def initialize(options = T.unsafe(nil)); end

  def data_type; end

  # @return [Boolean]
  def enabled?(_value); end

  # Public: Pretty string version for debugging.
  def inspect; end

  # Private: Name converted to value safe for adapter. Implemented in subclass.
  def key; end

  # Public: The name of the gate. Implemented in subclass.
  def name; end

  # Internal: Check if a gate is open for a thing. Implemented in subclass.
  #
  # Returns true if gate open for thing, false if not.
  #
  # @return [Boolean]
  def open?(_thing, _value, _options = T.unsafe(nil)); end

  # Internal: Check if a gate is protects a thing. Implemented in subclass.
  #
  # Returns true if gate protects thing, false if not.
  #
  # @return [Boolean]
  def protects?(_thing); end

  # Internal: Allows gate to wrap thing using one of the supported flipper
  # types so adapters always get something that responds to value.
  def wrap(thing); end
end

# Raised when gate can not be found for a thing.
class Flipper::GateNotFound < ::Flipper::Error
  # @return [GateNotFound] a new instance of GateNotFound
  def initialize(thing); end
end

class Flipper::GateValues
  # @return [GateValues] a new instance of GateValues
  def initialize(adapter_values); end

  # @return [Boolean]
  def ==(other); end

  def [](key); end

  # Returns the value of attribute actors.
  def actors; end

  # Returns the value of attribute boolean.
  def boolean; end

  # @return [Boolean]
  def eql?(other); end

  # Returns the value of attribute groups.
  def groups; end

  # Returns the value of attribute percentage_of_actors.
  def percentage_of_actors; end

  # Returns the value of attribute percentage_of_time.
  def percentage_of_time; end
end

# Private: Array of instance variables that are readable through the []
# instance method.
Flipper::GateValues::LegitIvars = T.let(T.unsafe(nil), Hash)

module Flipper::Gates; end

class Flipper::Gates::Actor < ::Flipper::Gate
  def data_type; end

  # @return [Boolean]
  def enabled?(value); end

  # Internal: Name converted to value safe for adapter.
  def key; end

  # Internal: The name of the gate. Used for instrumentation, etc.
  def name; end

  # Internal: Checks if the gate is open for a thing.
  #
  # Returns true if gate open for thing, false if not.
  #
  # @return [Boolean]
  def open?(context); end

  # @return [Boolean]
  def protects?(thing); end

  def wrap(thing); end
end

class Flipper::Gates::Boolean < ::Flipper::Gate
  def data_type; end

  # @return [Boolean]
  def enabled?(value); end

  # Internal: Name converted to value safe for adapter.
  def key; end

  # Internal: The name of the gate. Used for instrumentation, etc.
  def name; end

  # Internal: Checks if the gate is open for a thing.
  #
  # Returns true if explicitly set to true, false if explicitly set to false
  # or nil if not explicitly set.
  #
  # @return [Boolean]
  def open?(context); end

  # @return [Boolean]
  def protects?(thing); end

  def wrap(thing); end
end

class Flipper::Gates::Group < ::Flipper::Gate
  def data_type; end

  # @return [Boolean]
  def enabled?(value); end

  # Internal: Name converted to value safe for adapter.
  def key; end

  # Internal: The name of the gate. Used for instrumentation, etc.
  def name; end

  # Internal: Checks if the gate is open for a thing.
  #
  # Returns true if gate open for thing, false if not.
  #
  # @return [Boolean]
  def open?(context); end

  # @return [Boolean]
  def protects?(thing); end

  def wrap(thing); end
end

class Flipper::Gates::PercentageOfActors < ::Flipper::Gate
  def data_type; end

  # @return [Boolean]
  def enabled?(value); end

  # Internal: Name converted to value safe for adapter.
  def key; end

  # Internal: The name of the gate. Used for instrumentation, etc.
  def name; end

  # Internal: Checks if the gate is open for a thing.
  #
  # Returns true if gate open for thing, false if not.
  #
  # @return [Boolean]
  def open?(context); end

  # @return [Boolean]
  def protects?(thing); end
end

class Flipper::Gates::PercentageOfTime < ::Flipper::Gate
  def data_type; end

  # @return [Boolean]
  def enabled?(value); end

  # Internal: Name converted to value safe for adapter.
  def key; end

  # Internal: The name of the gate. Used for instrumentation, etc.
  def name; end

  # Internal: Checks if the gate is open for a thing.
  #
  # Returns true if gate open for thing, false if not.
  #
  # @return [Boolean]
  def open?(context); end

  # @return [Boolean]
  def protects?(thing); end
end

# A default implementation of `#flipper_id` for actors.
#
#   class User < Struct.new(:id)
#     include Flipper::Identifier
#   end
#
#   user = User.new(99)
#   Flipper.enable :thing, user
#   Flipper.enabled? :thing, user #=> true
module Flipper::Identifier
  def flipper_id; end
end

# Private: The namespace for all instrumented events.
Flipper::InstrumentationNamespace = T.let(T.unsafe(nil), Symbol)

module Flipper::Instrumenters; end

# Instrumentor that is useful for tests as it stores each of the events that
# are instrumented.
class Flipper::Instrumenters::Memory
  # @return [Memory] a new instance of Memory
  def initialize; end

  def event_by_name(name); end

  # Returns the value of attribute events.
  def events; end

  def events_by_name(name); end
  def instrument(name, payload = T.unsafe(nil)); end
  def reset; end
end

class Flipper::Instrumenters::Memory::Event < ::Struct
  # Returns the value of attribute name
  #
  # @return [Object] the current value of name
  def name; end

  # Sets the attribute name
  #
  # @param value [Object] the value to set the attribute name to.
  # @return [Object] the newly set value
  def name=(_); end

  # Returns the value of attribute payload
  #
  # @return [Object] the current value of payload
  def payload; end

  # Sets the attribute payload
  #
  # @param value [Object] the value to set the attribute payload to.
  # @return [Object] the newly set value
  def payload=(_); end

  # Returns the value of attribute result
  #
  # @return [Object] the current value of result
  def result; end

  # Sets the attribute result
  #
  # @param value [Object] the value to set the attribute result to.
  # @return [Object] the newly set value
  def result=(_); end

  class << self
    def [](*_arg0); end
    def inspect; end
    def members; end
    def new(*_arg0); end
  end
end

class Flipper::Instrumenters::Noop
  class << self
    # @yield [payload]
    def instrument(_name, payload = T.unsafe(nil)); end
  end
end

# Raised when an invalid value is set to a configuration property
class Flipper::InvalidConfigurationValue < ::Flipper::Error
  # @return [InvalidConfigurationValue] a new instance of InvalidConfigurationValue
  def initialize(message = T.unsafe(nil)); end
end

module Flipper::Middleware; end

class Flipper::Middleware::Memoizer
  # Public: Initializes an instance of the Memoizer middleware. Flipper must
  # be configured with a default instance or the flipper instance must be
  # setup in the env of the request. You can do this by using the
  # Flipper::Middleware::SetupEnv middleware.
  #
  # app - The app this middleware is included in.
  # opts - The Hash of options.
  #        :preload - Boolean to preload all features or Array of Symbol feature names to preload.
  #
  # Examples
  #
  #   use Flipper::Middleware::Memoizer
  #
  #   # using with preload_all features
  #   use Flipper::Middleware::Memoizer, preload: true
  #
  #   # using with preload specific features
  #   use Flipper::Middleware::Memoizer, preload: [:stats, :search, :some_feature]
  #
  # @return [Memoizer] a new instance of Memoizer
  def initialize(app, opts = T.unsafe(nil)); end

  def call(env); end

  private

  # @return [Boolean]
  def memoize?(request); end

  def memoized_call(env); end
end

class Flipper::Middleware::SetupEnv
  # Public: Initializes an instance of the SetupEnv middleware. Allows for
  # lazy initialization of the flipper instance being set in the env by
  # providing a block.
  #
  # app - The app this middleware is included in.
  # flipper_or_block - The Flipper::DSL instance or a block that yields a
  #                    Flipper::DSL instance to use for all operations
  #                    (optional, default: Flipper).
  #
  # Examples
  #
  #   flipper = Flipper.new(...)
  #
  #   # using with a normal flipper instance
  #   use Flipper::Middleware::SetupEnv, flipper
  #
  #   # using with a block that yields a flipper instance
  #   use Flipper::Middleware::SetupEnv, lambda { Flipper.new(...) }
  #
  #   # using default configured Flipper instance
  #   Flipper.configure do |config|
  #     config.default { Flipper.new(...) }
  #   end
  #   use Flipper::Middleware::SetupEnv
  #
  # @return [SetupEnv] a new instance of SetupEnv
  def initialize(app, flipper_or_block = T.unsafe(nil), options = T.unsafe(nil)); end

  def call(env); end
  def call!(env); end

  private

  def flipper; end
end

class Flipper::Railtie < ::Rails::Railtie; end

# Internal: Used to store registry of groups by name.
class Flipper::Registry
  include ::Enumerable

  # @return [Registry] a new instance of Registry
  def initialize(source = T.unsafe(nil)); end

  def add(key, value); end
  def clear; end
  def each(&block); end
  def get(key); end

  # @return [Boolean]
  def key?(key); end

  def keys; end
  def values; end
end

class Flipper::Registry::DuplicateKey < ::Flipper::Registry::Error; end
class Flipper::Registry::Error < ::StandardError; end

class Flipper::Registry::KeyNotFound < ::Flipper::Registry::Error
  # @return [KeyNotFound] a new instance of KeyNotFound
  def initialize(key); end

  # Public: The key that was not found
  def key; end
end

# Internal: Root class for all flipper types. You should never need to use this.
class Flipper::Type
  # @return [Boolean]
  def ==(other); end

  # @return [Boolean]
  def eql?(other); end

  # Returns the value of attribute value.
  def value; end

  class << self
    def wrap(value_or_instance); end
  end
end

module Flipper::Typecast
  class << self
    # Internal: Convert value to a boolean.
    #
    # Returns true or false.
    def to_boolean(value); end

    # Internal: Convert value to a float.
    #
    # Returns a Float representation of the value.
    # Raises ArgumentError if conversion is not possible.
    def to_float(value); end

    # Internal: Convert value to an integer.
    #
    # Returns an Integer representation of the value.
    # Raises ArgumentError if conversion is not possible.
    def to_integer(value); end

    # Internal: Convert value to a percentage.
    #
    # Returns a Integer or Float representation of the value.
    # Raises ArgumentError if conversion is not possible.
    def to_percentage(value); end

    # Internal: Convert value to a set.
    #
    # Returns a Set representation of the value.
    # Raises ArgumentError if conversion is not possible.
    def to_set(value); end
  end
end

Flipper::Typecast::TruthMap = T.let(T.unsafe(nil), Hash)
module Flipper::Types; end

class Flipper::Types::Actor < ::Flipper::Type
  # @raise [ArgumentError]
  # @return [Actor] a new instance of Actor
  def initialize(thing); end

  def method_missing(name, *args, **kwargs, &block); end

  # @return [Boolean]
  def respond_to?(*args); end

  # Returns the value of attribute thing.
  def thing; end

  class << self
    # @return [Boolean]
    def wrappable?(thing); end
  end
end

class Flipper::Types::Boolean < ::Flipper::Type
  # @return [Boolean] a new instance of Boolean
  def initialize(value = T.unsafe(nil)); end
end

class Flipper::Types::Group < ::Flipper::Type
  # @return [Group] a new instance of Group
  def initialize(name, &block); end

  # @return [Boolean]
  def call_with_no_context?(block); end

  # @return [Boolean]
  def match?(thing, context); end

  # Returns the value of attribute name.
  def name; end

  class << self
    def wrap(group_or_name); end
  end
end

Flipper::Types::Group::NO_PARAMS_IN_RUBY_3 = T.let(T.unsafe(nil), Array)

class Flipper::Types::Percentage < ::Flipper::Type
  # @return [Percentage] a new instance of Percentage
  def initialize(value); end
end

class Flipper::Types::PercentageOfActors < ::Flipper::Types::Percentage; end
class Flipper::Types::PercentageOfTime < ::Flipper::Types::Percentage; end
